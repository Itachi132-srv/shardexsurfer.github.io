<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Ball Breaker</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;}
body{background:black;overflow:hidden;color:white;touch-action:none;}
canvas{display:block;margin:auto;background:transparent;}

/* Logo */
#logo{position:fixed;top:10px;right:10px;width:60px;height:60px;z-index:30;}
#logo img{width:100%;height:100%;object-fit:contain;}

/* Top score bar */
#topBar{position:fixed;top:10px;left:50%;transform:translateX(-50%);font-size:18px;font-weight:bold;z-index:30;}

/* Overlay screens */
.screen{position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;background:rgba(0,0,0,0.6);z-index:20;}
.hidden{display:none;}
h1{font-size:40px;font-weight:900;text-transform:uppercase;animation:neonTitle 2s infinite alternate;text-align:center;}
@keyframes neonTitle{0%{color:#0ff;text-shadow:0 0 15px #0ff;}50%{color:#f0f;text-shadow:0 0 15px #f0f;}100%{color:#0f0;text-shadow:0 0 15px #0f0;}}
.btn{padding:12px 30px;font-size:18px;border:none;border-radius:6px;font-weight:bold;cursor:pointer;color:black;}
.easy{background:#00ff7f;} .medium{background:#ffd700;} .hard{background:#ff4040;}
</style>
</head>
<body>

<!-- Logo -->
<div id="logo"><img src="https://i.ibb.co/8gkXtrB/logo.png" alt="Logo"></div>

<!-- Top score -->
<div id="topBar">Score: <span id="score">0</span> | Best: <span id="best">0</span></div>

<!-- Game Canvas -->
<canvas id="game"></canvas>

<!-- Menu Screen -->
<div id="menu" class="screen">
  <h1>NEON BALL BREAKER</h1>
  <button class="btn easy" onclick="startGame(2)">Easy</button>
  <button class="btn medium" onclick="startGame(3.5)">Medium</button>
  <button class="btn hard" onclick="startGame(5)">Hard</button>
</div>

<!-- Defeat Screen -->
<div id="defeat" class="screen hidden">
  <h1>Defeat</h1>
  <button class="btn medium" onclick="restart()">Restart</button>
  <button class="btn easy" onclick="goMenu()">Menu</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
let w,h;
function resize(){w=canvas.width=window.innerWidth; h=canvas.height=window.innerHeight;}
resize();window.addEventListener("resize",resize);

// Game state
let paddle,balls,speed,running=false;
let score=0;
let best=Number(localStorage.getItem("nbb_best")||0);
document.getElementById("best").textContent=best;

// Load session storage state
if(sessionStorage.getItem("nbb_running")==="true"){
  running=true;
  score=Number(sessionStorage.getItem("nbb_score")||0);
  document.getElementById("score").textContent=score;
}

// Paddle setup
function initPaddle(){paddle={x:w/2-40,y:h-30,w:80,h:12,flash:0};}

// Balls
function spawnBall(){balls.push({x:Math.random()*(w-30)+15,y:-20,r:10,c:`hsl(${Math.random()*360},100%,60%)`});}

// Start game
function startGame(sp){
  speed=sp;score=0;document.getElementById("score").textContent=0;
  initPaddle();balls=[];running=true;
  sessionStorage.setItem("nbb_running", "true");
  sessionStorage.setItem("nbb_score", score);
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("defeat").classList.add("hidden");
  spawnBall();requestAnimationFrame(loop);
}

// Restart & Menu
function restart(){startGame(speed);}
function goMenu(){document.getElementById("menu").classList.remove("hidden");document.getElementById("defeat").classList.add("hidden");}

// Controls
window.addEventListener("mousemove",e=>{
  if(running){paddle.x=e.clientX-paddle.w/2; paddle.x=Math.max(0,Math.min(w-paddle.w,paddle.x));}
});
window.addEventListener("touchmove",e=>{
  if(running){paddle.x=e.touches[0].clientX-paddle.w/2; paddle.x=Math.max(0,Math.min(w-paddle.w,paddle.x));}
},{passive:true});

// Game loop
function loop(){
  if(!running) return;
  ctx.clearRect(0,0,w,h);

  // Paddle
  ctx.fillStyle=paddle.flash>0?"#00ff00":"#0ff";
  ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
  if(paddle.flash>0)paddle.flash--;

  // Balls
  for(let i=balls.length-1;i>=0;i--){
    let b=balls[i]; b.y+=speed;
    ctx.beginPath(); ctx.arc(b.x,b.y,b.r,0,Math.PI*2); ctx.fillStyle=b.c; ctx.shadowBlur=15; ctx.shadowColor=b.c; ctx.fill(); ctx.shadowBlur=0;

    // Collision
    if(b.y+b.r>paddle.y && b.x>paddle.x && b.x<paddle.x+paddle.w){
      balls.splice(i,1); score+=10;
      document.getElementById("score").textContent=score;
      paddle.flash=5; sessionStorage.setItem("nbb_score", score);
      spawnBall(); continue;
    }

    // Miss
    if(b.y-b.r>h){gameOver(); return;}
  }

  if(balls.length<3)spawnBall();
  requestAnimationFrame(loop);
}

// End game
function gameOver(){
  running=false; sessionStorage.setItem("nbb_running","false");
  if(score>best){best=score;localStorage.setItem("nbb_best",best);document.getElementById("best").textContent=best;}
  document.getElementById("defeat").classList.remove("hidden");
}
</script>
</body>
</html>
