<!DOCTYPE html>
<html>
<head>
  <title>2D Car Game</title>
  <style>
    body {
      margin: 0;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      background: #555;
      border: 3px solid white;
    }
  </style>
</head>
<body>

<canvas id="game" width="300" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// car
let car = {
  x: 130,
  y: 400,
  w: 40,
  h: 70
};

// obstacle
let obs = {
  x: Math.random() * 260,
  y: -100,
  w: 40,
  h: 70,
  speed: 4
};

// controls
let left = false;
let right = false;

document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") left = true;
  if (e.key === "ArrowRight") right = true;
});

document.addEventListener("keyup", e => {
  if (e.key === "ArrowLeft") left = false;
  if (e.key === "ArrowRight") right = false;
});

function drawCar() {
  ctx.fillStyle = "red";
  ctx.fillRect(car.x, car.y, car.w, car.h);
}

function drawObs() {
  ctx.fillStyle = "yellow";
  ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
}

function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if (left && car.x > 0) car.x -= 5;
  if (right && car.x < canvas.width - car.w) car.x += 5;

  obs.y += obs.speed;

  if (obs.y > canvas.height) {
    obs.y = -100;
    obs.x = Math.random() * 260;
  }

  // collision
  if (
    car.x < obs.x + obs.w &&
    car.x + car.w > obs.x &&
    car.y < obs.y + obs.h &&
    car.y + car.h > obs.y
  ) {
    alert("Game Over!");
    location.reload();
  }

  drawCar();
  drawObs();
  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
