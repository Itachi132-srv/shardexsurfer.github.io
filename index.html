<!DOCTYPE html>
<html>
<head>
<title>Neon Ball Breaker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Poppins:wght@500&display=swap');

html,body{
 margin:0;
 padding:0;
 overflow:hidden;
 background:#000;
 font-family:'Poppins',sans-serif;
}

/* ---------- MENU ---------- */
#menu{
 position:fixed;
 inset:0;
 display:flex;
 flex-direction:column;
 justify-content:center;
 align-items:center;
 background:radial-gradient(circle at top,#020024,#000);
 z-index:10;
}

/* title */
#title{
 font-family:'Orbitron',sans-serif;
 font-size:clamp(28px,6vw,56px);
 margin-bottom:30px;
 text-align:center;
 animation:neonTitle 4s infinite linear;
}

@keyframes neonTitle{
 0%{color:#00ffff;text-shadow:0 0 15px #00ffff}
 33%{color:#ff00ff;text-shadow:0 0 15px #ff00ff}
 66%{color:#00ff88;text-shadow:0 0 15px #00ff88}
 100%{color:#00ffff;text-shadow:0 0 15px #00ffff}
}

/* logo */
#logoBox{
 width:70px;
 height:70px;
 border:2px dashed #0ff;
 margin-bottom:20px;
 display:flex;
 justify-content:center;
 align-items:center;
 color:#0ff;
 font-size:11px;
}

/* buttons */
.menuBtn{
 width:220px;
 max-width:80vw;
 padding:14px;
 margin:10px;
 font-size:18px;
 border:none;
 border-radius:12px;
 cursor:pointer;
 font-weight:600;
}

#easy{background:#00ff88;box-shadow:0 0 20px #00ff88}
#medium{background:#ffee00;box-shadow:0 0 20px #ffee00}
#hard{background:#ff0033;box-shadow:0 0 20px #ff0033;color:#fff}

/* ---------- UI ---------- */
#ui,#best{
 position:fixed;
 top:10px;
 font-size:14px;
 color:white;
 display:none;
 z-index:5;
}
#ui{left:10px}
#best{right:10px}

/* ---------- CANVAS ---------- */
canvas{
 display:none;
}

/* ---------- DEFEAT ---------- */
#defeat{
 position:fixed;
 inset:0;
 display:none;
 justify-content:center;
 align-items:center;
 font-family:'Orbitron',sans-serif;
 font-size:clamp(30px,6vw,60px);
 color:red;
 background:black;
 z-index:20;
}
</style>
</head>
<body>

<!-- MENU -->
<div id="menu">
 <div id="logoBox">LOGO</div>
 <div id="title">NEON BALL BREAKER</div>
 <button class="menuBtn" id="easy">EASY</button>
 <button class="menuBtn" id="medium">MEDIUM</button>
 <button class="menuBtn" id="hard">HARD</button>
</div>

<!-- UI -->
<div id="ui">Score: <span id="score">0</span></div>
<div id="best">Best: <span id="bestScore">0</span></div>

<!-- DEFEAT -->
<div id="defeat">DEFEAT</div>

<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const menu=document.getElementById("menu");
const defeat=document.getElementById("defeat");
const ui=document.getElementById("ui");
const bestDiv=document.getElementById("best");
const scoreSpan=document.getElementById("score");
const bestSpan=document.getElementById("bestScore");

function resize(){
 canvas.width=window.innerWidth;
 canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

// -------- GAME STATE --------
let paddle,balls,score,settings;
let running=false;

let best=localStorage.getItem("NEON_BEST")||0;
bestSpan.textContent=best;

// -------- START GAME --------
function startGame(mode){
 settings={
  easy:{speed:2.3,gap:90},
  medium:{speed:3.8,gap:65},
  hard:{speed:5.2,gap:45}
 }[mode];

 score=0;
 scoreSpan.textContent=0;
 balls=[];
 running=true;

 paddle={
  w:canvas.width*0.28,
  h:14,
  x:canvas.width/2,
  y:canvas.height-50,
  color:"#00ffff"
 };

 menu.style.display="none";
 defeat.style.display="none";
 canvas.style.display="block";
 ui.style.display="block";
 bestDiv.style.display="block";

 requestAnimationFrame(loop);
}

// -------- BUTTONS --------
easy.onclick=()=>startGame("easy");
medium.onclick=()=>startGame("medium");
hard.onclick=()=>startGame("hard");

// -------- CONTROLS --------
let left=false,right=false;
document.addEventListener("keydown",e=>{
 if(e.key==="ArrowLeft") left=true;
 if(e.key==="ArrowRight") right=true;
});
document.addEventListener("keyup",e=>{
 if(e.key==="ArrowLeft") left=false;
 if(e.key==="ArrowRight") right=false;
});

// mobile
let lastX=null;
canvas.addEventListener("touchstart",e=>lastX=e.touches[0].clientX);
canvas.addEventListener("touchmove",e=>{
 if(!lastX) return;
 let dx=e.touches[0].clientX-lastX;
 paddle.x+=dx;
 lastX=e.touches[0].clientX;
});

// -------- BALLS --------
function spawnBall(){
 let x;
 do{x=Math.random()*canvas.width}
 while(balls.some(b=>Math.abs(b.x-x)<settings.gap));

 balls.push({
  x:x,
  y:-20,
  r:12,
  s:settings.speed,
  c:`hsl(${Math.random()*360},100%,60%)`
 });
}

// -------- END GAME --------
function endGame(){
 running=false;
 if(score>best){
  best=score;
  localStorage.setItem("NEON_BEST",best);
  bestSpan.textContent=best;
 }
 canvas.style.display="none";
 ui.style.display="none";
 bestDiv.style.display="none";
 defeat.style.display="flex";

 setTimeout(()=>{
  defeat.style.display="none";
  menu.style.display="flex";
 },2000);
}

// -------- LOOP (NO FREEZE) --------
function loop(){
 if(!running) return;

 ctx.clearRect(0,0,canvas.width,canvas.height);

 // paddle move
 if(left) paddle.x-=8;
 if(right) paddle.x+=8;
 paddle.x=Math.max(paddle.w/2,Math.min(canvas.width-paddle.w/2,paddle.x));

 ctx.fillStyle=paddle.color;
 ctx.fillRect(paddle.x-paddle.w/2,paddle.y,paddle.w,paddle.h);

 // balls
 for(let i=balls.length-1;i>=0;i--){
  let b=balls[i];
  b.y+=b.s;

  ctx.beginPath();
  ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
  ctx.fillStyle=b.c;
  ctx.fill();

  if(
   b.y+b.r>=paddle.y &&
   b.x>paddle.x-paddle.w/2 &&
   b.x<paddle.x+paddle.w/2
  ){
   balls.splice(i,1);
   score+=10;
   scoreSpan.textContent=score;
   paddle.color="#00ff88";
   setTimeout(()=>paddle.color="#00ffff",60);
   continue;
  }

  if(b.y-b.r>canvas.height){
   endGame();
   return;
  }
 }

 if(Math.random()<0.035) spawnBall();

 requestAnimationFrame(loop);
}
</script>
</body>
</html>
